<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Business Idea Generator - Real Ideas Based on Your Skills</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        @font-face { font-family: 'Futura'; src: local('Futura Extra Bold'); font-weight: 800; font-style: italic; }
        :root { --bg-primary: #ffffff; --bg-secondary: #f8fafc; --text-primary: #000000; --text-secondary: #4a4a4a; --text-muted: #717171; --accent-primary: #1292eb; --accent-hover: #0d7fd4; --accent-light: rgba(18,146,235,0.1); --border-color: #e5e5e5; --success-color: #10b981; --success-light: rgba(16,185,129,0.1); --warning-light: rgba(245,158,11,0.1); --warning-color: #f59e0b; --shadow-lg: 0 8px 30px rgba(18,146,235,0.15); --radius-md: 12px; --radius-lg: 16px; --radius-xl: 24px; }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Inter', sans-serif; background: var(--bg-primary); color: var(--text-primary); min-height: 100vh; line-height: 1.6; }
        .container { max-width: 1100px; margin: 0 auto; padding: 60px 24px 80px; }
        .header { text-align: center; margin-bottom: 40px; }
        .header-icon { display: inline-flex; align-items: center; justify-content: center; width: 72px; height: 72px; background: var(--accent-light); border-radius: var(--radius-lg); font-size: 36px; margin-bottom: 20px; }
        .header h1 { font-family: 'Futura', 'Trebuchet MS', sans-serif; font-size: clamp(32px, 5vw, 48px); font-weight: 800; font-style: italic; margin-bottom: 12px; }
        .header h1 span { color: var(--accent-primary); }
        .header p { font-size: 17px; color: var(--text-secondary); max-width: 600px; margin: 0 auto; }
        .stats-bar { display: flex; justify-content: center; gap: 40px; margin-bottom: 40px; padding: 16px; background: var(--bg-secondary); border-radius: var(--radius-lg); flex-wrap: wrap; }
        .stat { display: flex; align-items: center; gap: 8px; font-size: 14px; color: var(--text-secondary); }
        .stat-icon { width: 32px; height: 32px; background: var(--accent-light); border-radius: 8px; display: flex; align-items: center; justify-content: center; color: var(--accent-primary); }
        .stat strong { color: var(--text-primary); }
        .form-section { display: grid; gap: 20px; margin-bottom: 24px; }
        .form-group { background: #fff; border: 2px solid var(--border-color); border-radius: var(--radius-lg); padding: 20px; transition: border-color 0.3s; }
        .form-group:focus-within { border-color: var(--accent-primary); }
        .form-label { display: block; font-size: 14px; font-weight: 600; margin-bottom: 8px; }
        .form-hint { font-size: 13px; color: var(--text-muted); margin-bottom: 12px; }
        .form-input { width: 100%; padding: 14px; border: 2px solid var(--border-color); border-radius: var(--radius-md); font-family: inherit; font-size: 15px; transition: border-color 0.3s; }
        .form-input:focus { outline: none; border-color: var(--accent-primary); }
        textarea.form-input { min-height: 100px; resize: vertical; }
        
        .options-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px; }
        .option-group { background: #fff; border: 2px solid var(--border-color); border-radius: var(--radius-md); padding: 20px; }
        .option-label { display: block; font-size: 13px; font-weight: 600; margin-bottom: 12px; }
        .option-buttons { display: flex; flex-wrap: wrap; gap: 8px; }
        .option-btn { padding: 10px 16px; background: var(--bg-secondary); border: 2px solid transparent; border-radius: 100px; font-size: 13px; font-weight: 500; color: var(--text-secondary); cursor: pointer; transition: all 0.25s; }
        .option-btn:hover { border-color: var(--accent-primary); color: var(--accent-primary); }
        .option-btn.active { background: var(--accent-primary); border-color: var(--accent-primary); color: white; }
        .generate-section { display: flex; justify-content: center; margin: 32px 0; }
        .generate-btn { display: flex; align-items: center; gap: 10px; padding: 18px 48px; background: var(--accent-primary); border: none; border-radius: var(--radius-xl); font-size: 16px; font-weight: 600; color: white; cursor: pointer; transition: all 0.3s; box-shadow: 0 4px 20px rgba(18,146,235,0.3); }
        .generate-btn:hover { background: var(--accent-hover); transform: translateY(-2px); }
        .generate-btn:disabled { opacity: 0.6; cursor: not-allowed; transform: none; }
        .spinner { width: 20px; height: 20px; border: 2px solid rgba(255,255,255,0.3); border-top-color: white; border-radius: 50%; animation: spin 0.8s linear infinite; display: none; }
        .generate-btn.loading .spinner { display: block; }
        .generate-btn.loading .btn-text { display: none; }
        @keyframes spin { to { transform: rotate(360deg); } }
        
        /* Loading state */
        .loading-message { text-align: center; padding: 40px 20px; display: none; }
        .loading-message.show { display: block; }
        .loading-message h3 { font-size: 18px; margin-bottom: 8px; color: var(--text-primary); }
        .loading-message p { color: var(--text-muted); font-size: 14px; }
        .loading-dots { display: flex; justify-content: center; gap: 8px; margin-bottom: 16px; }
        .loading-dots span { font-size: 24px; animation: pulse 1.5s ease-in-out infinite; }
        .loading-dots span:nth-child(2) { animation-delay: 0.2s; }
        .loading-dots span:nth-child(3) { animation-delay: 0.4s; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.4; } }
        
        .output-section { display: none; }
        .output-section.show { display: block; animation: slideUp 0.4s ease-out; }
        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; } }
        
        /* AI Response styling */
        .ai-response { background: #fff; border: 2px solid var(--border-color); border-radius: var(--radius-lg); padding: 32px; margin-bottom: 24px; }
        .ai-response h2 { font-size: 24px; font-weight: 700; color: var(--text-primary); margin-top: 32px; margin-bottom: 16px; padding-bottom: 8px; border-bottom: 2px solid var(--accent-light); }
        .ai-response h2:first-child { margin-top: 0; }
        .ai-response h3 { font-size: 16px; font-weight: 600; color: var(--text-primary); margin-top: 20px; margin-bottom: 10px; }
        .ai-response p { font-size: 15px; line-height: 1.8; color: var(--text-secondary); margin-bottom: 12px; }
        .ai-response ul { list-style: none; margin: 12px 0; }
        .ai-response li { display: flex; gap: 10px; margin-bottom: 10px; font-size: 15px; line-height: 1.7; color: var(--text-secondary); }
        .ai-response li::before { content: '‚Üí'; color: var(--accent-primary); font-weight: 600; flex-shrink: 0; }
        .ai-response strong { color: var(--text-primary); }
        .ai-response hr { margin: 32px 0; border: none; border-top: 1px solid var(--border-color); }
        
        .error-message { background: #fef2f2; border: 2px solid #fecaca; color: #dc2626; padding: 16px 20px; border-radius: var(--radius-md); margin-bottom: 20px; display: none; }
        .error-message.show { display: block; }
        
        .ideas-grid { display: grid; gap: 24px; }
        .idea-card { background: #fff; border: 2px solid var(--border-color); border-radius: var(--radius-lg); overflow: hidden; transition: all 0.3s; }
        .idea-card:hover { border-color: var(--accent-primary); box-shadow: var(--shadow-lg); }
        .idea-header { display: flex; align-items: flex-start; justify-content: space-between; padding: 24px; background: var(--bg-secondary); border-bottom: 1px solid var(--border-color); gap: 16px; flex-wrap: wrap; }
        .idea-title-section { flex: 1; min-width: 200px; }
        .idea-number { display: inline-flex; align-items: center; justify-content: center; width: 28px; height: 28px; background: var(--accent-primary); border-radius: 50%; color: white; font-size: 13px; font-weight: 700; margin-bottom: 10px; }
        .idea-title { font-size: 20px; font-weight: 700; margin-bottom: 6px; }
        .idea-tagline { font-size: 14px; color: var(--text-secondary); }
        .idea-scores { display: flex; gap: 12px; }
        .score-badge { display: flex; flex-direction: column; align-items: center; padding: 10px 14px; background: #fff; border: 1px solid var(--border-color); border-radius: var(--radius-md); }
        .score-value { font-size: 18px; font-weight: 800; color: var(--accent-primary); }
        .score-label { font-size: 10px; font-weight: 600; color: var(--text-muted); text-transform: uppercase; }
        .idea-body { padding: 24px; }
        .idea-section { margin-bottom: 20px; }
        .idea-section:last-child { margin-bottom: 0; }
        .idea-section-title { font-size: 13px; font-weight: 600; text-transform: uppercase; margin-bottom: 10px; }
        .idea-section-content { font-size: 14px; line-height: 1.7; color: var(--text-secondary); }
        .idea-section-content ul { list-style: none; }
        .idea-section-content li { display: flex; gap: 10px; margin-bottom: 8px; }
        .idea-section-content li::before { content: '‚Üí'; color: var(--accent-primary); font-weight: 600; }
        .idea-tags { display: flex; flex-wrap: wrap; gap: 8px; margin-top: 16px; padding-top: 16px; border-top: 1px solid var(--border-color); }
        .idea-tag { padding: 6px 12px; background: var(--accent-light); border-radius: 100px; font-size: 12px; font-weight: 500; color: var(--accent-primary); }
        .idea-tag.easy { background: var(--success-light); color: var(--success-color); }
        .idea-tag.medium { background: var(--warning-light); color: var(--warning-color); }
        .idea-actions { display: flex; gap: 12px; padding: 16px 24px; background: var(--bg-secondary); border-top: 1px solid var(--border-color); }
        .idea-action-btn { flex: 1; display: flex; align-items: center; justify-content: center; gap: 8px; padding: 12px; background: #fff; border: 2px solid var(--border-color); border-radius: var(--radius-md); font-size: 13px; font-weight: 600; color: var(--text-secondary); cursor: pointer; transition: all 0.25s; }
        .idea-action-btn:hover { border-color: var(--accent-primary); color: var(--accent-primary); }
        .idea-action-btn.copied { border-color: var(--success-color); color: var(--success-color); background: var(--success-light); }
        
        .reset-btn { display: flex; align-items: center; justify-content: center; gap: 8px; margin: 0 auto 24px; padding: 12px 24px; background: var(--bg-secondary); border: 2px solid var(--border-color); border-radius: var(--radius-md); font-size: 14px; font-weight: 600; color: var(--text-secondary); cursor: pointer; transition: all 0.25s; }
        .reset-btn:hover { border-color: var(--accent-primary); color: var(--accent-primary); }
        
        @media (max-width: 768px) { .options-grid { grid-template-columns: 1fr; } .stats-bar { flex-direction: column; align-items: center; } }
    </style>
</head>
<body>
<div class="container">
    <header class="header">
        <div class="header-icon">üí°</div>
        <h1>Business Idea <span>Generator</span></h1>
        <p>Get specific, validated micro-niche business ideas tailored to your skills, interests, and goals. AI-powered market research included.</p>
    </header>
    <div class="stats-bar">
        <div class="stat"><div class="stat-icon">üéØ</div><span><strong>Micro-niche</strong> focused</span></div>
        <div class="stat"><div class="stat-icon">üîç</div><span><strong>AI</strong> researched</span></div>
        <div class="stat"><div class="stat-icon">üìä</div><span><strong>3</strong> validated ideas</span></div>
    </div>
    
    <div id="formSection">
        <!-- Skills Input -->
        <div class="form-section">
            <div class="form-group">
                <label class="form-label">üéØ Your Skills & Expertise</label>
                <textarea class="form-input" id="skillsInput" placeholder="E.g., Marketing, web development, cooking, fitness training, writing, design, sales..."></textarea>
            </div>
        </div>
        
        <!-- Interests Input -->
        <div class="form-section">
            <div class="form-group">
                <label class="form-label">‚ù§Ô∏è Your Interests & Passions</label>
                <textarea class="form-input" id="interestsInput" placeholder="E.g., Sustainability, technology, health & wellness, education, travel, food..."></textarea>
            </div>
        </div>
        
        <!-- Options Grid -->
        <div class="options-grid">
            <div class="option-group">
                <label class="option-label">üí∞ Starting Budget</label>
                <div class="option-buttons">
                    <button class="option-btn active" data-option="budget" data-value="Under $1K">Under $1K</button>
                    <button class="option-btn" data-option="budget" data-value="$1K - $10K">$1K - $10K</button>
                    <button class="option-btn" data-option="budget" data-value="$10K - $50K">$10K - $50K</button>
                    <button class="option-btn" data-option="budget" data-value="$50K+">$50K+</button>
                </div>
            </div>
            <div class="option-group">
                <label class="option-label">‚è∞ Time Commitment</label>
                <div class="option-buttons">
                    <button class="option-btn active" data-option="time" data-value="Side Hustle (few hours/week)">Side Hustle</button>
                    <button class="option-btn" data-option="time" data-value="Part-Time (10-20 hours/week)">Part-Time</button>
                    <button class="option-btn" data-option="time" data-value="Full-Time (40+ hours/week)">Full-Time</button>
                </div>
            </div>
            <div class="option-group">
                <label class="option-label">üìä Business Model</label>
                <div class="option-buttons">
                    <button class="option-btn active" data-option="model" data-value="Any business model">Any</button>
                    <button class="option-btn" data-option="model" data-value="Service-based business">Service</button>
                    <button class="option-btn" data-option="model" data-value="Product-based business">Product</button>
                    <button class="option-btn" data-option="model" data-value="SaaS / Software">SaaS</button>
                    <button class="option-btn" data-option="model" data-value="Content / Media">Content</button>
                </div>
            </div>
            <div class="option-group">
                <label class="option-label">üéØ Target Market</label>
                <div class="option-buttons">
                    <button class="option-btn active" data-option="market" data-value="B2C (selling to consumers)">B2C</button>
                    <button class="option-btn" data-option="market" data-value="B2B (selling to businesses)">B2B</button>
                    <button class="option-btn" data-option="market" data-value="Both B2C and B2B">Both</button>
                </div>
            </div>
        </div>
    </div>
    
    <div class="error-message" id="errorMessage"></div>
    
    <div class="generate-section">
        <button class="generate-btn" id="generateBtn">
            <span class="btn-text">üöÄ Generate Niche Business Ideas</span>
            <div class="spinner"></div>
        </button>
    </div>
    
    <div class="loading-message" id="loadingMessage">
        <div class="loading-dots">
            <span>üîç</span>
            <span>üìä</span>
            <span>üí°</span>
        </div>
        <h3>Researching Market Opportunities...</h3>
        <p>Finding specific niche ideas for you. This may take 10-20 seconds.</p>
    </div>
    
    <div class="output-section" id="outputSection">
        <button class="reset-btn" id="resetBtn">‚Üê Start Over</button>
        <div class="ai-response" id="aiResponse"></div>
    </div>
</div>

<script>
// State management
let opts = {
    budget: 'Under $1K',
    time: 'Side Hustle (few hours/week)',
    model: 'Any business model',
    market: 'B2C (selling to consumers)'
};

// Option button handlers
document.querySelectorAll('.option-btn').forEach(btn => {
    btn.onclick = () => {
        const option = btn.dataset.option;
        document.querySelectorAll(`[data-option="${option}"]`).forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        opts[option] = btn.dataset.value;
    };
});

// Optimized system prompt for Haiku
const SYSTEM_PROMPT = `You are an expert business strategist who identifies profitable micro-niche opportunities. You provide specific, actionable business ideas - not generic suggestions.

For each idea you MUST include:
- A specific niche name (not broad categories like "fitness" but specific like "posture correction for remote workers")
- Real pain points people have expressed
- Specific monetization with actual price points
- Named platforms to sell on
- Concrete first steps to start this week

Format each niche clearly with headers and bullet points. Be specific and practical.`;

// Render markdown to HTML
function renderMarkdown(text) {
    let html = text
        .replace(/^## (.+)$/gm, '<h2>$1</h2>')
        .replace(/^### (.+)$/gm, '<h3>$1</h3>')
        .replace(/\*\*([^*]+)\*\*/g, '<strong>$1</strong>')
        .replace(/^---$/gm, '<hr>')
        .replace(/^- (.+)$/gm, '<li>$1</li>')
        .split('\n\n')
        .map(block => {
            if (block.startsWith('<h') || block.startsWith('<hr') || block.startsWith('<li')) {
                return block;
            }
            if (block.includes('<li>')) {
                return '<ul>' + block + '</ul>';
            }
            if (block.trim() && !block.startsWith('<')) {
                return '<p>' + block.replace(/\n/g, ' ') + '</p>';
            }
            return block;
        })
        .join('\n');
    
    return html;
}

// Generate ideas
document.getElementById('generateBtn').onclick = async () => {
    const skills = document.getElementById('skillsInput').value.trim();
    const interests = document.getElementById('interestsInput').value.trim();
    
    if (!skills && !interests) {
        document.getElementById('errorMessage').textContent = 'Please enter your skills or interests to get personalized recommendations.';
        document.getElementById('errorMessage').classList.add('show');
        return;
    }
    
    document.getElementById('errorMessage').classList.remove('show');
    
    const userPrompt = `Generate 3 specific micro-niche business ideas for someone with:

SKILLS: ${skills || 'Not specified'}
INTERESTS: ${interests || 'Not specified'}
BUDGET: ${opts.budget}
TIME: ${opts.time}
BUSINESS MODEL: ${opts.model}
TARGET MARKET: ${opts.market}

For EACH idea, provide:

## Niche [Number]: [Specific Niche Name]

### The Problem
What specific pain point does this solve? Who has this problem?

### The Solution
What exactly would you sell/offer? Be specific.

### Revenue Potential
- Pricing: [specific price points]
- Monthly potential: [realistic range]
- How you get paid: [payment model]

### Why This Works For You
How does this match the person's skills and constraints?

### Getting Started This Week
1. [First concrete action]
2. [Second concrete action]
3. [Third concrete action]

### Platforms & Tools
- Where to sell: [specific platforms]
- Tools needed: [specific tools]

---

Remember: Be SPECIFIC. Not "fitness coaching" but "online mobility coaching for desk workers with back pain". Include real price points and platforms.`;

    const btn = document.getElementById('generateBtn');
    btn.classList.add('loading');
    btn.disabled = true;
    document.getElementById('loadingMessage').classList.add('show');
    document.getElementById('outputSection').classList.remove('show');
    
    try {
        const response = await fetch('/api/groq', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
                model: 'claude-haiku-4-5-20251001',
                max_tokens: 3000,
                system: SYSTEM_PROMPT,
                messages: [{ role: 'user', content: userPrompt }]
            })
        });
        
        const data = await response.json();
        
        if (data.error) {
            throw new Error(data.error.message || 'API request failed');
        }
        
        const textContent = data.content
            ?.filter(block => block.type === 'text')
            ?.map(block => block.text)
            ?.join('\n\n') || '';
        
        if (!textContent) {
            throw new Error('No response generated. Please try again.');
        }
        
        document.getElementById('aiResponse').innerHTML = renderMarkdown(textContent);
        document.getElementById('outputSection').classList.add('show');
        document.getElementById('formSection').style.display = 'none';
        document.querySelector('.generate-section').style.display = 'none';
        document.getElementById('outputSection').scrollIntoView({ behavior: 'smooth' });
        
    } catch (err) {
        document.getElementById('errorMessage').textContent = err.message || 'Failed to generate ideas. Please try again.';
        document.getElementById('errorMessage').classList.add('show');
    } finally {
        btn.classList.remove('loading');
        btn.disabled = false;
        document.getElementById('loadingMessage').classList.remove('show');
    }
};

// Reset button
document.getElementById('resetBtn').onclick = () => {
    document.getElementById('outputSection').classList.remove('show');
    document.getElementById('formSection').style.display = 'block';
    document.querySelector('.generate-section').style.display = 'flex';
    document.getElementById('aiResponse').innerHTML = '';
    window.scrollTo({ top: 0, behavior: 'smooth' });
};
</script>
</body>
</html>
